angular.module("portfolioApp",["ngSanitize","ngRoute"]).constant("AppConfig",{}).config(["$sceDelegateProvider",function($sceDelegateProvider){}]).config(["$locationProvider",function($locationProvider){$locationProvider.html5Mode(true);$locationProvider.hashPrefix("!")}]).config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"ng/views/index.html",controller:"indexCtrl",controllerAs:"indexCtrl"}).when("/experiences/:experienceUrl/",{templateUrl:"ng/views/experience.html",controller:"experienceCtrl",controllerAs:"experienceCtrl"}).when("/projects/:projectUrl/",{templateUrl:"ng/views/project.html",controller:"projectCtrl",controllerAs:"projectCtrl"}).otherwise({redirectTo:"/"})}]);(function(){angular.module("portfolioApp").controller("experienceCtrl",["$routeParams","portfolioData",experienceCtrlFunc]);function experienceCtrlFunc($routeParams,portfolioData){var self=this;self.test=$routeParams;portfolioData.getExperience($routeParams.experienceUrl).then(function(data){self.experience=data})}})();(function(){angular.module("portfolioApp").controller("indexCtrl",["portfolioData",indexCtrlFunc]);function indexCtrlFunc(portfolioData){var self=this;portfolioData.getPortfolio().then(function(data){self.portfolio=data})}})();(function(){angular.module("portfolioApp").controller("mainCtrl",["portfolioData",mainCtrlFunc]);function mainCtrlFunc(portfolioData){var self=this;self.copyYear=(new Date).getFullYear();self.test="Hi from Main Ctrl"}})();(function(){angular.module("portfolioApp").controller("projectCtrl",["$routeParams","portfolioData",projectCtrlFunc]);function projectCtrlFunc($routeParams,portfolioData){var self=this;portfolioData.getProject($routeParams.projectUrl).then(function(data){self.project=data})}})();(function(){angular.module("portfolioApp").factory("portfolioData",["$http","$q",portfolioDataFunc]);function portfolioDataFunc($http,$q){var portfolio;function getPortfolio(){if(portfolio){console.log("optimize");return $q.when(portfolio)}else{return $http.get("data/port.json",{cache:true}).then(function(data){portfolio=data.data;portfolio.skills=getSkills(portfolio);console.log("interesting");return portfolio})}}function getExperience(experienceUrl){return getPortfolio().then(function(portfolio){return _.findWhere(portfolio.a,{url:experienceUrl})})}function getProject(projectUrl){return getPortfolio().then(function(portfolio){return _.findWhere(portfolio.b,{url:projectUrl})})}return{getPortfolio:getPortfolio,getExperience:getExperience,getProject:getProject};function getSkills(portfolio){var skillsUnsorted=[];skillsUnsorted=skillsUnsorted.concat(_.pluck(portfolio.a,"skills"));skillsUnsorted=skillsUnsorted.concat(_.pluck(portfolio.b,"skills"));return frequency(_.flatten(skillsUnsorted,true))}function frequency(arr){var result=[];for(var i=0;i<arr.length;i++){var match=_.findWhere(result,{skill:arr[i]});if(match){match.count+=1}else{result.push({skill:arr[i],count:1})}}return result}}})();